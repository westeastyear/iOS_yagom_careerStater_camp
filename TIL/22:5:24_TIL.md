# TIL (Today I Learned)
5월 24일 (화)

## 학습내용

- **활동학습 - `String`을 `reference type`으로 표현하는 이유**

### 🔎 `String`을 `reference type`으로 표현하는 이유!

- `String`은 길이가 지정되어 있지 않습니다.
- “크기가 지정되어 있지 않다”라는 것은 동적이라는 의미입니다.


`String`은 글자 길이에 따라서 0과 1의 개수가 분명히 늘어날텐데 스텍영역에 고정적으로 할당할 수 없습니다. 그래서 힙영역을 활용합니다. 스텍영역에 주소값을 넣어놓고 힙영역을 사용합니다. 

겉으로 봤을때 `String`은 구조체이지만 내부적으로는 힙영역을 사용합니다. 그래서 힙영역을 사용하는게 무조건 클래스만 있는건 아니라는 말이 있는것입니다. `String`은 `reference type`입니다.

<img src="https://user-images.githubusercontent.com/74251593/170298532-57107b30-54b9-4b1a-8032-627d4a0377c9.png" width="100%"><br>

<img src="https://user-images.githubusercontent.com/74251593/170298544-b37b1442-31da-4cb0-b50d-9a8b47cacf9a.png" width="100%"><br>

위의 코드 예시에서 `cache`에다가 `Attributes`라는 `value type`대신에 `String`을 썼다면 어떻게 될까요? 그리고 `Key`를 `reference type`으로 만들어준다면? 키를 계속 `String`으로 할당해 준다면?

힙영역을 계속 찾아야 된다라는 뜻과 마찬가지 입니다. 우리는 `cache`를 성능을 높이려고 사용하는데, 힙영역의 공간을 찾아야 되는 `String`을 여기다가 할당을 한다는 것은, 성능상의 이점을 누리기 어려울 것입니다. 그래서 위의 예시에서 `reference type`을 사용하지 않는 `Attributes`라는 구조체로 변환을 해준것입니다.

<br>

> - **번외로, `64bit` 아키텍쳐에서 스위프트 `Int`는 몇 바이트를 사용할까요?**
> 
> - `64bit`는 `CPU`가 한번에 처리할 수 있는 명령어가 64개 `bit`로 이루어져 있다는 뜻이고, `CPU`가 한 번에 받아들일 수 있는 0과 1의 갯수가 64개라는 뜻입니다. 우리의 컴퓨터는 기본적으로 연산장치이기 때문에 가장 기본으로 사용하는 단위가 `Int`입니다.
> - 가장 기본으로 사용하는 숫자 단위 `Int`고, `Int`는 최대 효율을 지향합니다. 그래서 `CPU`가 처리할 수 있는 한 번에 0과 1의 개수는 대체적으로 같습니다. 그래서 이 `64bit` 아키텍처의 인트는 `64bit`. 즉, `8byte`입니다.
> - 몇 년 전만해도, `32bit`를 사용했었습니다. `32bit` 아키텍쳐에서 `Int`는 `4byte`였습니다. 당시에 `4byte`로 산정을 해놓고 코드를 작성했던 프로그래머들은 아키텍쳐가 `64bit`로 넘어갈때 난리가 났었습니다. `Int`가 `8byte`라는 것은 지금의 이야기이지 미래까지의 이야기는 아닐겁니다.
 
<br> 
